Соображения возникли, когда думал, как тестировать.  
##### Определения
скобочная последовательность - сп  
правильная скобочная последовательность - псп  
неправильная скобочная последовательность - нпсп
---

##### Сложение
'+' означает, что в результате вторая пс будет следовать за первой
сложение с псп не меняет правильность  
псп+псп = псп   
нпсп+псп = нпсп  
псп+нпсп = нпсп  
---

##### Вставка
'\*' означает вставку первой пс в любое место второй пс  
вставка с псп не меняет правильность  
псп\*псп = псп  
псп\*нпсп = нпсп  
нпсп\*псп = нпсп  
---

##### Укоренение
сп\*'()' (или сп\*'[]' или сп\*'{}')  
не меняет правильность  
---

##### Обрезка
Обратна укоренению, не меняет правильность

##### Выемка
Обратная вставке, возможная, если в первой содержится вторая,  
нпсп-псп = нпсп  
псп-псп = псп  
псп-нпсп = нпсп  
выемка с псп не меняет правильность  
---
Сумма может рассматриваться, как частный случай вставки,  
поскольку всегда можно рассматривать деревья только с корнем  
---

##### Утверждение1
Каждое дерево без корня, является суммой деревьев с корнем.  
Подразумевается, что последовательность правильная.  
В результате этого факта вставка в такое дерево будет производиться  
либо в одно из деревьев, либо между какой-либо парой деревьев.  
---  
нпсп - внутри парных скобок содержится нпсп, наличие скобки без пары  
(()) - здесь, например, 2й символ находится между 1м и 3м,  
но 1й и 3й не являются парными скобками 
---
##### Ещё вариант требований:
1. количество открывающих и закрывающих скобок одинаково
2. если двигаться от начала к концу, то открывающих скобок всегда не меньше
3. если двигаться с конца к началу, то закрывающих скобок всегда не меньше
4. между любой парой, состоящей из открытой и закрытой скобок, так чтобы закрытая скобка закрывала именно эту самую открывающую, все скобки одного вида составляют правильную скобочную последовательность



